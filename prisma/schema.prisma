generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Album {
  id          String   @id
  name        String
  artist      String
  releaseDate String?
  imageUrl    String?
  tracks      Track[]
  createdAt   DateTime @default(now())
}

model Track {
  id              String   @id
  name            String
  albumId         String
  album           Album    @relation(fields: [albumId], references: [id], onDelete: Cascade)
  trackNumber     Int
  durationMs      Int
  isSkitOrInterlude Boolean @default(false)
  rating          Rating?
  createdAt       DateTime @default(now())
}

model Rating {
  id           String   @id @default(cuid())
  trackId      String   @unique
  track        Track    @relation(fields: [trackId], references: [id], onDelete: Cascade)
  beat         Int      // Rating out of 20
  lyrics       Int      // Rating out of 20
  flow         Int      // Rating out of 20
  content      Int      // Rating out of 20
  replayValue  Int      // Rating out of 20
  notes        String?  @db.Text
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
